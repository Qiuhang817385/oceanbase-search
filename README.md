# OceanBase å¤šæ•°æ®åº“å‘é‡æœç´¢ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Next.js å’Œ Prisma çš„å¤šæ•°æ®åº“å‘é‡æœç´¢åº”ç”¨ï¼Œæ”¯æŒç”µå½±æ•°æ®çš„æ™ºèƒ½æœç´¢å’Œæ¨èã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **å¤šæ•°æ®åº“æ”¯æŒ**: åŒæ—¶è¿æ¥ä¸»æ•°æ®åº“å’Œå¤‡ç”¨æ•°æ®åº“
- **å‘é‡æœç´¢**: åŸºäº OpenAI Embeddings çš„è¯­ä¹‰æœç´¢
- **æ··åˆæœç´¢**: ç»“åˆå‘é‡æœç´¢å’Œå…³é”®è¯æœç´¢
- **æ™ºèƒ½é™çº§**: å‘é‡æœç´¢å¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ°æ–‡æœ¬æœç´¢
- **ç°ä»£åŒ– UI**: åŸºäº Ant Design çš„å“åº”å¼ç•Œé¢
- **å®æ—¶æœç´¢**: æ”¯æŒå®æ—¶æœç´¢å’Œç»“æœå±•ç¤º

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 15, React 19, Ant Design, TypeScript
- **åç«¯**: Next.js API Routes, Prisma ORM
- **æ•°æ®åº“**: OceanBase (MySQL å…¼å®¹)
- **å‘é‡æœç´¢**: OpenAI Embeddings API
- **çŠ¶æ€ç®¡ç†**: SWR, ahooks

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Node.js 18+
- npm/yarn/pnpm
- OceanBase æ•°æ®åº“è®¿é—®æƒé™
- OpenAI API Key

## ğŸ”§ å®‰è£…å’Œé…ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd oceanbase-search
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
# æ•°æ®åº“è¿æ¥
DATABASE_URL="mysql://username:password@host:port/database"
DATABASE_URL_BACK="mysql://username:password@host:port/database"

# OpenAI é…ç½®
OPENAI_API_KEY="your-openai-api-key"
EMBEDDING_PROVIDER="openai"
EMBEDDING_MODEL="text-embedding-v4"
DIMENSIONS="1024"
BASE_URL="https://dashscope.aliyuncs.com/compatible-mode/v1"

# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_URL="http://localhost:3000"
```

### 4. æ•°æ®åº“è®¾ç½®

```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
npm run setup

# è¿è¡Œæ•°æ®åº“è¿ç§»ï¼ˆå¦‚æœéœ€è¦ï¼‰
npm run db:migrate
```

## ğŸš€ å¯åŠ¨é¡¹ç›®

### å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨æ‰§è¡Œ Prisma ç”Ÿæˆï¼‰
npm run dev

# æˆ–è€…åªå¯åŠ¨æœåŠ¡å™¨ï¼ˆä¸é‡æ–°ç”Ÿæˆ Prismaï¼‰
npm run dev:only
```

### ç”Ÿäº§ç¯å¢ƒ

```bash
# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
oceanbase-search/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ api/                      # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ hybrid-search/        # æ··åˆæœç´¢ API
â”‚   â”‚   â”œâ”€â”€ multi-vector-search/  # å¤šæ•°æ®åº“å‘é‡æœç´¢ API
â”‚   â”‚   â””â”€â”€ vector-search/        # å‘é‡æœç´¢ API
â”‚   â”œâ”€â”€ hybrid-search/            # æ··åˆæœç´¢é¡µé¢
â”‚   â””â”€â”€ page.tsx                  # é¦–é¡µ
â”œâ”€â”€ lib/                          # å·¥å…·åº“
â”‚   â”œâ”€â”€ multi-prisma.ts          # å¤šæ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ prisma.ts                # Prisma å®¢æˆ·ç«¯
â”‚   â””â”€â”€ movies.ts                # ç”µå½±æ•°æ®å¤„ç†
â”œâ”€â”€ prisma/                       # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ schema.prisma            # æ•°æ®åº“æ¨¡å¼
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

## ğŸ” API æ¥å£

### å¤šæ•°æ®åº“å‘é‡æœç´¢

```http
POST /api/multi-vector-search
Content-Type: application/json

{
  "query": "æœç´¢å…³é”®è¯",
  "limit": 10,
  "databases": ["main", "back"]
}
```

### æ··åˆæœç´¢

```http
POST /api/hybrid-search
Content-Type: application/json

{
  "query": "æœç´¢å…³é”®è¯",
  "limit": 10,
  "vectorWeight": 0.7,
  "keywordWeight": 0.3
}
```

### å¥åº·æ£€æŸ¥

```http
GET /api/multi-vector-search
```

## ğŸ¯ ä½¿ç”¨è¯´æ˜

1. **æœç´¢åŠŸèƒ½**: åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å…³é”®è¯ï¼Œç³»ç»Ÿä¼šåŒæ—¶è¿›è¡Œå‘é‡æœç´¢å’Œæ··åˆæœç´¢
2. **ç»“æœå±•ç¤º**: å·¦ä¾§æ˜¾ç¤ºå¤šæ•°æ®åº“å‘é‡æœç´¢ç»“æœï¼Œå³ä¾§æ˜¾ç¤ºæ··åˆæœç´¢ç»“æœ
3. **ç›¸ä¼¼åº¦è¯„åˆ†**: æ¯ä¸ªç»“æœéƒ½ä¼šæ˜¾ç¤ºç›¸ä¼¼åº¦è¯„åˆ†å’Œè¿›åº¦æ¡
4. **æ™ºèƒ½é™çº§**: å¦‚æœå‘é‡æœç´¢å¤±è´¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ°æ–‡æœ¬æœç´¢

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æœç´¢ç±»å‹

1. åœ¨ `app/api/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ API è·¯ç”±
2. åœ¨ `lib/multi-prisma.ts` ä¸­æ·»åŠ æ•°æ®åº“è¿æ¥ç®¡ç†
3. æ›´æ–°å‰ç«¯é¡µé¢ä»¥æ”¯æŒæ–°çš„æœç´¢ç±»å‹

### æ•°æ®åº“æ¨¡å¼æ›´æ–°

1. ä¿®æ”¹ `prisma/schema.prisma`
2. è¿è¡Œ `npm run setup` é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯
3. æ›´æ–°ç›¸å…³çš„ API å’Œå‰ç«¯ä»£ç 

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Prisma å®¢æˆ·ç«¯æœªç”Ÿæˆ**

   ```bash
   npm run setup
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**

   - æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
   - ç¡®è®¤æ•°æ®åº“æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

3. **å‘é‡æœç´¢å¤±è´¥**

   - æ£€æŸ¥ OpenAI API Key æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ embedding å­—æ®µæ•°æ®æ˜¯å¦å®Œæ•´

4. **BigInt åºåˆ—åŒ–é”™è¯¯**
   - ç³»ç»Ÿå·²è‡ªåŠ¨å¤„ç†ï¼Œå¦‚æœä»æœ‰é—®é¢˜è¯·æ£€æŸ¥æ•°æ®æ ¼å¼

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.1.0

- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒå¤šæ•°æ®åº“å‘é‡æœç´¢
- å®ç°æ··åˆæœç´¢åŠŸèƒ½
- æ·»åŠ æ™ºèƒ½é™çº§æœºåˆ¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘é€é‚®ä»¶è‡³ [your-email@example.com]

---

**æ³¨æ„**: è¯·ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ­£ç¡®é…ç½®æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œå¹¶å®šæœŸå¤‡ä»½æ•°æ®åº“ã€‚
